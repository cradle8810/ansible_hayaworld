---
- name: Install apcupsd for master
  ansible.builtin.include_tasks:
    file: roles/apcupsd/tasks/master.yml
  when: apcupsd_role == 'master'

- name: Install apcupsd for slave
  ansible.builtin.include_tasks:
    file: roles/apcupsd/tasks/slave.yml
  when: apcupsd_role == 'slave'

- name: Install apccontrol script
  ansible.builtin.template:
    src: templates/etc/apcupsd/apccontrol.j2
    dest: /etc/apcupsd/apccontrol
    owner: root
    group: root
    mode: '0755'
