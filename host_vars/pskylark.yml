---
apt:
  - hdparm
  - htop
  - less
  - vim

firewall:
  policy: deny
  allow_rules:
    ipv4:
      - name: "SSH from service line"
        proto: "tcp"
        src: "192.168.88.0/24"
        port: '22'
      - name: "NFS from service line"
        proto: "tcp"
        src: "192.168.88.0/24"
        port: '2049'
      - name: "RPC from service line(TCP)"
        proto: "tcp"
        src: "192.168.88.0/24"
        port: '111'
      - name: "RPC from service line(UDP)"
        proto: "udp"
        src: "192.168.88.0/24"
        port: '111'
      - name: "RPC from service line(TCP)"
        proto: "tcp"
        src: "192.168.88.0/24"
        port: '20048'
      - name: "RPC from service line(UDP)"
        proto: "udp"
        src: "192.168.88.0/24"
        port: '20048'
    ipv6:
      - name: "SSH from service line(IPv6)"
        proto: "tcp"
        src: "{{ ipv6.ula.prefix }}::/48"
        port: '22'
      - name: "NFS from service line(IPv6)"
        proto: "tcp"
        src: "{{ ipv6.ula.prefix }}::/48"
        port: '2049'

nfs:
  threads: 200
  domain: "{{ subnet.search }}"
  exports:
    - path: "/Volume1/proxmox"
      allowip: "192.168.88.0/24"
      options: "rw,no_root_squash,no_subtree_check,crossmnt,async"
      uid: 0
      gid: 0
      mode: '0755'
    - path: "/tempdir"
      allowip: "192.168.88.0/24"
      options: "rw,no_root_squash,no_subtree_check,crossmnt,async,fsid=1"
      uid: 0
      gid: 0
      mode: '0777'
  tmpfs:
    - path: "/tempdir"
      size: "8G"

cpu:
  governor: powersave

dmcache:
  lvs: "vg0/lv-0"
  migration_threshold: "32768"
