---
apt:
  - curl
  - dstat
  - htop
  - nfs-common
  - qemu-guest-agent
  - rsyslog

services_start:
  - qemu-guest-agent

firewall:
  policy: deny
  allow_rules:
    ipv4:
      - name: "SSH from service line"
        proto: "tcp"
        src: "192.168.1.0/24"
        port: '22'
      - name: "Rsyslog(UDP) from service line"
        proto: "udp"
        src: "192.168.1.0/24"
        port: '514'
      - name: "Rsyslog(TCP) from service line"
        proto: "tcp"
        src: "192.168.1.0/24"
        port: '514'
    ipv6:
      - name: "SSH from service line(IPv6)"
        proto: "tcp"
        src: "{{ ipv6.ula.prefix }}::/48"
        port: '22'
      - name: "DHCPv6 Client from service line"
        proto: "udp"
        src: "::"
        port: "546"

syslog:
  rsyslog_server_uuid: "eae4947a-1397-48f6-a4c0-c13a3cc30c2a"
  rsyslog_server_mountpoint: "/var/log/hayaworld"
  rsyslog_server_filesystem: "btrfs"
  rsyslog_server_options: "defaults,noatime,compress=zstd:1"
  rsyslog_server_actions:
    - facility: "kern"
      priority: "*"
      file: "/var/log/hayaworld/kern.log"
    - facility: "user"
      priority: "*"
      file: "/var/log/hayaworld/user.log"
    - facility: "mail"
      priority: "*"
      file: "/var/log/hayaworld/mail.log"
    - facility: "daemon"
      priority: "*"
      file: "/var/log/hayaworld/daemon.log"
    - facility: "auth"
      priority: "*"
      file: "/var/log/hayaworld/auth.log"
    - facility: "syslog"
      priority: "*"
      file: "/var/log/hayaworld/syslog.log"
    - facility: "local1"
      priority: "*"
      file: "/var/log/hayaworld/local1.log"
    - facility: "local2"
      priority: "*"
      file: "/var/log/hayaworld/local2.log"
    - facility: "local3"
      priority: "*"
      file: "/var/log/hayaworld/local3.log"
    - facility: "local4"
      priority: "*"
      file: "/var/log/hayaworld/local4.log"
    - facility: "local5"
      priority: "*"
      file: "/var/log/hayaworld/local5.log"
    - facility: "local6"
      priority: "*"
      file: "/var/log/hayaworld/local6.log"
    - facility: "local7"
      priority: "*"
      file: "/var/log/hayaworld/local7.log"
