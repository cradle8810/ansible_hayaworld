---
- name: "Common / Does motd file exist in repo?"
  ansible.builtin.stat:
    path: "templates/{{ hostinfo.shortname }}/etc/motd"
  register: "motd_existed"
  delegate_to: localhost
  ignore_errors: true

- name: "Common / Put motd"
  ansible.builtin.copy:
    src: "templates/{{ hostinfo.shortname }}/etc/motd"
    dest: /etc/motd
    owner: root
    group: root
    mode: '0644'
  when: motd_existed.stat.exists
